var PopupFunc={checkEmail:function(email){if(email.indexOf(".")==-1)return false;var regex=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;return regex.test(email)},keyLogin:function(e){e=e?e:window.event;if(e.keyCode==13){jQuery("button[name='signinSubmit']")[0].click()}},keyRegister:function(e){e=e?e:window.event;if(e.keyCode==13){jQuery("button[name='signupSubmit']")[0].click()}},validateSignIn:function(){var doc=window.document;var signintip=jQuery("div[name='signintip']")[0];var usernametip=jQuery("span[name='usernametip']")[0];var passwordtip=jQuery("span[name='passwordtip']")[0];var height=395;var username=jQuery("input[name='username']")[0];var reMail=true;var mail=username.value;mail=mail.replace(/(^\s*)|(\s*$)/g,"");username.value=mail;if(mail.length==0){usernametip.innerHTML=LocalFunc._("mailEmptyTip");reMail=false;height+=2}else if(mail.length>64){usernametip.innerHTML=LocalFunc._("mailLengthTip");reMail=false;height+=2}else if(!this.checkEmail(mail)){usernametip.innerHTML=LocalFunc._("mailWrongTip");reMail=false;height+=2}var password=jQuery("input[name='password']")[0];var rePswd=true;var pswd=password.value;pswd=pswd.replace(/(^\s*)|(\s*$)/g,"");password.value=pswd;var length=pswd.length;if(length==0){passwordtip.innerHTML=LocalFunc._("pswdEmptyTip");rePswd=false;height+=3}else if(length<6||length>64){passwordtip.innerHTML=LocalFunc._("pswdLengthTip");rePswd=false;height+=18}if(reMail&&rePswd)return true;signintip.style.display="none";this.showUsernameError(0,!reMail);this.showPswdError(0,!rePswd);return false},validateSignUp:function(){var doc=window.parent.document;var signuptip=jQuery("div[name='signuptip']")[0];var usernametip=jQuery("span[name='usernametip']")[1];var usernametip1=jQuery("span[name='usernametip1']")[0];var passwordtip=jQuery("span[name='passwordtip']")[1];var height=414;var username=jQuery("input[name='username']")[1];var reMail=true;var mail=username.value;mail=mail.replace(/(^\s*)|(\s*$)/g,"");username.value=mail;if(mail.length==0){usernametip.innerHTML=LocalFunc._("mailEmptyTip");reMail=false}else if(mail.length>64){usernametip.innerHTML=LocalFunc._("mailLengthTip");reMail=false}else if(!this.checkEmail(mail)){usernametip.innerHTML=LocalFunc._("mailWrongTip");reMail=false}var username1=jQuery("input[name='username1']")[0];var reConfirm=true;var mail1=username1.value;if(mail1.length==0){usernametip1.innerHTML=LocalFunc._("mailWrongTip");reConfirm=false}else if(mail!==mail1){usernametip1.innerHTML=LocalFunc._("mailConfirmTip");reConfirm=false}var password=jQuery("input[name='password']")[1];var rePswd=true;var pswd=password.value;pswd=pswd.replace(/(^\s*)|(\s*$)/g,"");password.value=pswd;var length=pswd.length;if(length==0){passwordtip.innerHTML=LocalFunc._("pswdEmptyTip");rePswd=false;height+=2}else if(length<6||length>64){passwordtip.innerHTML=LocalFunc._("pswdLengthTip");rePswd=false;height+=20}if(!reMail&&!reConfirm&&!rePswd)height+=2;else if(reMail&&reConfirm&&rePswd)return true;signuptip.style.display="none";this.showUsernameError(1,!reMail);this.showUsername1Error(!reConfirm);this.showPswdError(1,!rePswd);return false},showUsernameError:function(idx,flag){var usernametip=jQuery("span[name='usernametip']")[idx];var username=jQuery("input[name='username']")[idx];if(!flag){usernametip.style.display="none"}else{usernametip.style.display="block"}},menuClick:function(){jQuery("#account_menu").hide()},showUsername1Error:function(flag){var usernametip1=jQuery("span[name='usernametip1']")[0];var username1=jQuery("input[name='username1']")[0];if(!flag){usernametip1.style.display="none"}else{usernametip1.style.display="block"}},showPswdError:function(idx,flag){var passwordtip=jQuery("span[name='passwordtip']")[idx];var password=jQuery("input[name='password']")[idx];if(!flag){passwordtip.style.display="none"}else{passwordtip.style.display="block"}}};