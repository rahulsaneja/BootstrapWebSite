var inAppClick=false;function stopDefault(e){if(e&&e.preventDefault){e.preventDefault()}else{window.event.returnValue=false}return false}var LocalFunc={_:function(val){return localTipTitle[val]}};window.onkeydown=function(e){if(e.keyCode==27){PanelFunc.closeModal()}};window.fbAsyncInit=function(){FB.init({appId:"348667772210542",xfbml:true,version:"v2.11"})};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk");var modalName=null;var PanelFunc={onClick:function(object,callback){jQuery(object).click(callback())},closeModal:function(){jQuery(".designevo-modal").hide();jQuery("#modal_mask").hide();this.resetPanels();modalName=null},showModal:function(name){this.resetPanels();jQuery("#modal_mask").css({height:jQuery(document).height(),width:jQuery(document).width()}).show();jQuery("#"+name).find("input[type='text']").each(function(){if(jQuery(this).val()==""){jQuery(this).val("")}});jQuery("#"+name).css({"z-index":65556}).show();modalName=name},resetPanels:function(){PopupFunc.showUsernameError(0,false);PopupFunc.showUsernameError(1,false);PopupFunc.showUsername1Error(false);PopupFunc.showPswdError(0,false);PopupFunc.showPswdError(1,false);jQuery("input[name='username']")[1].value="";jQuery("input[name='password']")[1].value="";jQuery("input[name='username']")[0].value="";jQuery("input[name='username1']")[0].value="";jQuery("input[name='password']")[0].value="";jQuery("div[name='signuptip']")[0].style.display="none";jQuery("div[name='signintip']")[0].style.display="none"},modalVisible:function(name){if(jQuery("#"+name).is(":visible")&&jQuery("#modal_mask").is(":visible")){return true}return false},closeLoginSignup:function(){if(jQuery("#signin").is(":visible"))jQuery("#signin").hide();if(jQuery("#signup").is(":visible"))jQuery("#signup").hide();jQuery("#modal_mask").hide()},signUpToExport:function(type){var title1=LocalFunc._("loginSaveTitle");var title2=LocalFunc._("signupSaveTitle");switch(type){case"share":{title1=LocalFunc._("loginShareTitle");title2=LocalFunc._("signupShareTitle");break}case"print":{title1=LocalFunc._("loginPrintTitle");title2=LocalFunc._("signupPrintTitle");break}default:break}jQuery("span[name='signupTitle']")[0].innerHTML=title2;jQuery("span[name='loginTitle']")[0].innerHTML=title1;this.showSignUpPane();inAppClick=false},signIn:function(e){stopDefault(e);this.closeLoginSignup();this.showSignInPane()},showSignInPane:function(){jQuery("div[name='signintip']")[0].style.display="none";jQuery("span[name='usernametip']")[0].style.display="none";jQuery("span[name='passwordtip']")[0].style.display="none";this.showModal("signin");var jp=CookieFunc.initLogin();AjaxPost.ajaxCheckLogin()},showSignUpPane:function(){jQuery("div[name='signuptip']")[0].style.display="none";jQuery("span[name='usernametip']")[1].style.display="none";jQuery("span[name='passwordtip']")[1].style.display="none";this.showModal("signup");var jp=CookieFunc.initLogin();AjaxPost.ajaxCheckLogin()},signUp:function(event){stopDefault(event);this.closeLoginSignup();this.showSignUpPane("signup")},signinClick:function(){jQuery("span[name='signupTitle']")[0].innerHTML=LocalFunc._("signupTitle");jQuery("span[name='loginTitle']")[0].innerHTML=LocalFunc._("loginTitle");this.showSignInPane();if(inAppClick){inAppClick=false;return}},signupClick:function(){jQuery("span[name='signupTitle']")[0].innerHTML=LocalFunc._("signupTitle");jQuery("span[name='loginTitle']")[0].innerHTML=LocalFunc._("loginTitle");this.showSignUpPane();if(inAppClick){inAppClick=false;return}},confirmAccount:function(){this.closeModal();jQuery("#emailService")[0].click()},showLoginBtn:function(){jQuery("#unlogin").removeClass("u-hide");jQuery("#logged").addClass("u-hide")},hideLoginBtn:function(){jQuery("#unlogin").addClass("u-hide");jQuery("#logged").removeClass("u-hide")}};var loginFacebookFunc={loginClick:function(e){stopDefault(e);var idx=0;if(PanelFunc.modalVisible("signup")){idx=1}var progress=jQuery("div[name='fb_progress']")[idx];var oldHtml=jQuery(e.target).html();var targetBtn=e.target;jQuery(progress).show();jQuery(targetBtn).html("");FB.login(function(response){if(response.status==="connected"){this.handleFacebookConnected(response,oldHtml)}else if(response.status==="not_authorized"){jQuery(progress).hide();jQuery(targetBtn).html(oldHtml)}else{jQuery(progress).hide();jQuery(targetBtn).html(oldHtml)}}.bind(this),{scope:"public_profile,email"})},handleFacebookConnected:function(resp,oldHtml){var userID=resp.authResponse.userID;FB.api("/me?fields=id,name,gender,email",function(response){AjaxPost.ajaxConnectFacebook(response,userID,oldHtml)})},statusChangeCallback:function(response){if(response.status==="connected"){this.handleFacebookConnected(response)}else if(response.status==="not_authorized"){}else{}},checkLoginState:function(){FB.getLoginStatus(function(response){this.statusChangeCallback(response)}.bind(this))}};var CookieFunc={initLogin:function(){if("true"===this.getCookie("designevo_remember")){var usertoken=this.getCookie("designevo_usertoken");if(usertoken){jQuery.ajax({type:"POST",url:"index.php?option=com_designevo&task=user.rememberState",data:{token:usertoken},success:function(response){response=response.substring(response.lastIndexOf("{'"));var obj=new Function("return"+response)();if(obj.result==true&&PanelFunc.modalVisible("signin")){var doc=window.parent.document;jQuery("input[name='username']")[0].value=obj.username;jQuery("input[name='password']")[0].value=obj.pswd;jQuery("#remember").addClass("designevo-checkbox-btn-checked")}}})}}},setCookie:function(name,value){var Days=10;var exp=new Date;exp.setTime(exp.getTime()+Days*24*60*60*1e3);document.cookie=name+"="+escape(value)+";expires="+exp.toGMTString()},getCookie:function(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");if(arr=document.cookie.match(reg))return unescape(arr[2]);else return null},delCookie:function(name){var exp=new Date;exp.setTime(exp.getTime()-1);var cval=this.getCookie(name);if(cval!=null)document.cookie=name+"="+cval+";expires="+exp.toGMTString()}};